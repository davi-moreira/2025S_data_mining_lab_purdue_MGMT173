<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="author" content="Professor: Davi Moreira">
  <title>MGMT 17300: Data Mining Lab –  MGMT 17300: Data Mining Lab </title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title"><span style="font-size: 100%;"> MGMT 17300: Data Mining Lab </span></h1>
  <p class="subtitle"><span style="font-size: 150%;">Model Evaluation with Logistic Regression</span></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Professor: Davi Moreira 
</div>
</div>
</div>

</section>
<section id="overview" class="slide level2 center">
<h2>Overview</h2>
<div>
<div class="columns">
<div class="column" style="text-align: center; justify-content: center; align-items: center;">
<ul>
<li>Introduction to Logistic Regression</li>
<li>Train-Test Split</li>
<li>Model Training: Fitting a Logistic Regression Model<br>
</li>
<li>Predictions on the Test Set</li>
</ul>
</div><div class="column" style="text-align: center; justify-content: center; align-items: center;">
<ul>
<li><p>Model Evaluation</p>
<ul>
<li>Confusion Matrix</li>
<li>Sensitivity</li>
<li>Specificity</li>
<li>Precision</li>
<li>F1 Score</li>
<li>Balanced Accuracy</li>
<li>ROC Curve &amp; AUC</li>
</ul></li>
<li><p>K-Fold Cross-Validation</p></li>
</ul>
</div></div>
</div>
</section>
<section>
<section id="motivation" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Motivation</h1>

</section>
<section id="what-is-a-classification-problem" class="slide level2 center">
<h2>What is a classification problem?</h2>
<center>
<p><br></p>
<p><img src="https://raw.githubusercontent.com/davi-moreira/naive_bayes/main/figs/boxes.gif" width="800"></p>
<p><br></p>
<p>Classification involves categorizing data into predefined classes or groups based on their features.</p>
</center>
</section></section>
<section>
<section id="introduction-to-logistic-regression" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Introduction to Logistic Regression</h1>

</section>
<section id="what-is-logistic-regression" class="slide level2 center">
<h2>What is Logistic Regression?</h2>
<ul>
<li class="fragment"><p>A statistical method used for binary classification tasks.</p></li>
<li class="fragment"><p>Predicts the probability of an event occurring (e.g., Yes or No).</p></li>
<li class="fragment"><p>Useful for tasks like determining if a customer will make a purchase.</p></li>
</ul>
</section>
<section id="why-logistic-regression" class="slide level2 center">
<h2>Why Logistic Regression?</h2>
<ul>
<li class="fragment"><p>Handles binary outcomes effectively.</p></li>
<li class="fragment"><p>Provides interpretable results (log-odds, odds ratios, and probability).</p></li>
<li class="fragment"><p>Can handle continuous and categorical predictors.</p></li>
</ul>
</section></section>
<section>
<section id="logistic-regression-framework" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Logistic Regression Framework</h1>

</section>
<section id="assumptions" class="slide level2 center">
<h2>Assumptions</h2>
<ol type="1">
<li class="fragment"><p><strong>Binary Dependent Variable</strong>: Logistic regression predicts probabilities for two categories.</p></li>
<li class="fragment"><p><strong>Independent Observations</strong>: Data points should be independent of each other.</p></li>
<li class="fragment"><p><strong>Linearity in the Log-Odds</strong>: The log-odds of the dependent variable should be linearly related to the independent variables.</p></li>
<li class="fragment"><p><strong>No Multicollinearity</strong>: Independent variables should not be highly correlated.</p></li>
</ol>
</section>
<section id="the-logistic-regression-model" class="slide level2 center">
<h2>The Logistic Regression Model</h2>
<h3 id="log-odds-equation">Log-Odds Equation</h3>
<p><span class="math display">\[
\text{logit}(P) = \log\left(\frac{P}{1-P}\right) = \beta_0 + \beta_1X_1 + \beta_2X_2 + \dots + \beta_nX_n
\]</span></p>
<div>
<div style="font-size: 99%;">
<ul>
<li><span class="math inline">\(P\)</span>: Probability of the outcome (e.g., Purchase = Yes).</li>
<li><span class="math inline">\(X_1, X_2, \dots, X_n\)</span>: Predictor variables.</li>
<li><span class="math inline">\(\beta_0, \beta_1, \dots, \beta_n\)</span>: Coefficients.</li>
</ul>
</div>
</div>
<h3 id="converting-log-odds-to-probability">Converting Log-Odds to Probability</h3>
<p><span class="math display">\[
P = \frac{1}{1 + e^{-\text{logit}(P)}}
\]</span></p>
</section></section>
<section>
<section id="generating-a-synthetic-business-dataset" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Generating a Synthetic Business Dataset</h1>

</section>
<section id="generating-a-synthetic-business-dataset-1" class="slide level2 center">
<h2>Generating a Synthetic Business Dataset</h2>
<div>
<div style="font-size: 80%;">
<p>In many business scenarios, we aim to predict whether a customer will make a <strong>purchase</strong> based on collected information, usually on demographic and engagement factors. Our synthetic dataset simulates a simplified version of real-world data, capturing:</p>
<ul>
<li><strong>Age</strong>: Customer’s age, distributed around 40 years old with some variation<br>
</li>
<li><strong>Gender</strong>: Categorical variable indicating <code>"Male"</code> or <code>"Female"</code><br>
</li>
<li><strong>Income</strong>: Approximate annual income in US dollars<br>
</li>
<li><strong>Engagement</strong>: A normalized score (0 to 1) reflecting how actively a customer interacts with the business (e.g., website visits, email clicks, etc.)<br>
</li>
<li><strong>Purchase</strong>: A binary outcome (<code>"No"</code> or <code>"Yes"</code>) indicating whether the customer decided to buy a product</li>
</ul>
</div>
</div>
</section>
<section id="generating-a-synthetic-business-dataset-2" class="slide level2 center">
<h2>Generating a Synthetic Business Dataset</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># Uncomment and install if needed:</span></span>
<span id="cb1-2"><a></a><span class="co"># install.packages("caret")</span></span>
<span id="cb1-3"><a></a><span class="co"># install.packages("dplyr")</span></span>
<span id="cb1-4"><a></a><span class="co"># install.packages("pROC")</span></span>
<span id="cb1-5"><a></a></span>
<span id="cb1-6"><a></a><span class="fu">library</span>(caret)</span>
<span id="cb1-7"><a></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-8"><a></a><span class="fu">library</span>(pROC)</span>
<span id="cb1-9"><a></a></span>
<span id="cb1-10"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)  <span class="co"># ensures reproducibility</span></span>
<span id="cb1-11"><a></a></span>
<span id="cb1-12"><a></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb1-13"><a></a></span>
<span id="cb1-14"><a></a><span class="co"># 1) Generate basic customer attributes</span></span>
<span id="cb1-15"><a></a>Age <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(n, <span class="at">mean =</span> <span class="dv">40</span>, <span class="at">sd =</span> <span class="dv">10</span>))</span>
<span id="cb1-16"><a></a>Gender <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>), n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-17"><a></a>Income <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(n, <span class="at">mean =</span> <span class="dv">60000</span>, <span class="at">sd =</span> <span class="dv">10000</span>))</span>
<span id="cb1-18"><a></a>Engagement <span class="ot">&lt;-</span> <span class="fu">runif</span>(n, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">1</span>)</span>
<span id="cb1-19"><a></a></span>
<span id="cb1-20"><a></a><span class="co"># 2) Make some feature shifts to mimic demographic differences</span></span>
<span id="cb1-21"><a></a><span class="co">#    (Optional step to create more distinct sub-groups)</span></span>
<span id="cb1-22"><a></a>Engagement[Gender <span class="sc">==</span> <span class="st">"Female"</span>] <span class="ot">&lt;-</span> Engagement[Gender <span class="sc">==</span> <span class="st">"Female"</span>] <span class="sc">+</span> <span class="fl">0.1</span></span>
<span id="cb1-23"><a></a>Income[Gender <span class="sc">==</span> <span class="st">"Female"</span>]     <span class="ot">&lt;-</span> Income[Gender <span class="sc">==</span> <span class="st">"Female"</span>] <span class="sc">+</span> <span class="dv">3000</span></span>
<span id="cb1-24"><a></a>Age[Gender <span class="sc">==</span> <span class="st">"Female"</span>]        <span class="ot">&lt;-</span> Age[Gender <span class="sc">==</span> <span class="st">"Female"</span>] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb1-25"><a></a></span>
<span id="cb1-26"><a></a><span class="co"># 3) Define business rules / assumptions for purchase probability</span></span>
<span id="cb1-27"><a></a><span class="co">#    We'll combine a baseline with increments/decrements based on thresholds.</span></span>
<span id="cb1-28"><a></a>baseline_prob <span class="ot">&lt;-</span> <span class="fl">0.2</span></span>
<span id="cb1-29"><a></a></span>
<span id="cb1-30"><a></a>purchase_prob <span class="ot">&lt;-</span> <span class="fu">rep</span>(baseline_prob, n)</span>
<span id="cb1-31"><a></a></span>
<span id="cb1-32"><a></a><span class="co"># a) Customers with higher engagement more likely to buy</span></span>
<span id="cb1-33"><a></a>purchase_prob[Engagement <span class="sc">&gt;=</span> <span class="fl">0.5</span>] <span class="ot">&lt;-</span> purchase_prob[Engagement <span class="sc">&gt;=</span> <span class="fl">0.5</span>] <span class="sc">+</span> <span class="fl">0.3</span></span>
<span id="cb1-34"><a></a></span>
<span id="cb1-35"><a></a><span class="co"># b) Higher income is a strong indicator of potential purchase</span></span>
<span id="cb1-36"><a></a>purchase_prob[Income <span class="sc">&gt;=</span> <span class="dv">55000</span>] <span class="ot">&lt;-</span> purchase_prob[Income <span class="sc">&gt;=</span> <span class="dv">55000</span>] <span class="sc">+</span> <span class="fl">0.25</span></span>
<span id="cb1-37"><a></a></span>
<span id="cb1-38"><a></a><span class="co"># c) Suppose 'Female' customers have a slight bump in probability</span></span>
<span id="cb1-39"><a></a>purchase_prob[Gender <span class="sc">==</span> <span class="st">"Female"</span>] <span class="ot">&lt;-</span> purchase_prob[Gender <span class="sc">==</span> <span class="st">"Female"</span>] <span class="sc">+</span> <span class="fl">0.1</span></span>
<span id="cb1-40"><a></a></span>
<span id="cb1-41"><a></a><span class="co"># d) Age effect: perhaps older customers (&gt;=45) have slightly higher probability</span></span>
<span id="cb1-42"><a></a>purchase_prob[Age <span class="sc">&gt;=</span> <span class="dv">45</span>] <span class="ot">&lt;-</span> purchase_prob[Age <span class="sc">&gt;=</span> <span class="dv">45</span>] <span class="sc">+</span> <span class="fl">0.05</span></span>
<span id="cb1-43"><a></a></span>
<span id="cb1-44"><a></a><span class="co"># 4) Add random noise to reflect real-world unpredictability</span></span>
<span id="cb1-45"><a></a><span class="co">#    (some random variation that might increase or decrease probabilities)</span></span>
<span id="cb1-46"><a></a>noise <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="fl">0.05</span>)</span>
<span id="cb1-47"><a></a>purchase_prob <span class="ot">&lt;-</span> purchase_prob <span class="sc">+</span> noise</span>
<span id="cb1-48"><a></a></span>
<span id="cb1-49"><a></a><span class="co"># 5) Clamp probabilities to valid [0, 1] range</span></span>
<span id="cb1-50"><a></a>purchase_prob <span class="ot">&lt;-</span> <span class="fu">pmin</span>(<span class="fu">pmax</span>(purchase_prob, <span class="fl">0.01</span>), <span class="fl">0.99</span>)</span>
<span id="cb1-51"><a></a></span>
<span id="cb1-52"><a></a><span class="co"># 6) Generate the Purchase variable via Bernoulli trials</span></span>
<span id="cb1-53"><a></a>Purchase <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> purchase_prob)</span>
<span id="cb1-54"><a></a></span>
<span id="cb1-55"><a></a><span class="co"># 7) Combine into a data frame</span></span>
<span id="cb1-56"><a></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-57"><a></a>  <span class="at">Age        =</span> Age,</span>
<span id="cb1-58"><a></a>  <span class="at">Gender     =</span> <span class="fu">factor</span>(Gender),</span>
<span id="cb1-59"><a></a>  <span class="at">Income     =</span> Income,</span>
<span id="cb1-60"><a></a>  <span class="at">Engagement =</span> Engagement,</span>
<span id="cb1-61"><a></a>  <span class="at">Purchase   =</span> <span class="fu">factor</span>(Purchase, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))</span>
<span id="cb1-62"><a></a>)</span>
<span id="cb1-63"><a></a></span>
<span id="cb1-64"><a></a><span class="co"># Quick checks</span></span>
<span id="cb1-65"><a></a><span class="fu">table</span>(df<span class="sc">$</span>Purchase)</span>
<span id="cb1-66"><a></a></span>
<span id="cb1-67"><a></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section></section>
<section>
<section id="exploratory-data-analysis-eda" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Exploratory Data Analysis (EDA)</h1>

</section>
<section id="summary-statistics" class="slide level2 center">
<h2>Summary Statistics</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">summary</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="age-vs.-purchase-probability" class="slide level2 center">
<h2>Age vs.&nbsp;Purchase Probability</h2>

<img data-src="09_model_evaluation_files/figure-revealjs/unnamed-chunk-3-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><p><br></p>
</section>
<section id="income-vs.-purchase-probability" class="slide level2 center">
<h2>Income vs.&nbsp;Purchase Probability</h2>

<img data-src="09_model_evaluation_files/figure-revealjs/unnamed-chunk-4-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><p><br></p>
</section>
<section id="purchase-rate-by-gender" class="slide level2 center">
<h2>Purchase Rate by Gender</h2>

<img data-src="09_model_evaluation_files/figure-revealjs/unnamed-chunk-5-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><p><br></p>
</section>
<section id="purchase-probability-by-engagement" class="slide level2 center">
<h2>Purchase Probability by Engagement</h2>

<img data-src="09_model_evaluation_files/figure-revealjs/unnamed-chunk-6-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><p><br></p>
</section>
<section id="correlation-matrix" class="slide level2 center">
<h2>Correlation Matrix</h2>

<img data-src="09_model_evaluation_files/figure-revealjs/unnamed-chunk-7-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><p><br></p>
</section></section>
<section>
<section id="train-test-split" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Train-Test Split</h1>

</section>
<section id="train-test-split-1" class="slide level2 center">
<h2>Train-Test Split</h2>
<div style="font-size: 80%;">
<p>Randomly split the data into <strong>train (80%)</strong> and <strong>test (20%)</strong> for unbiased evaluation. This process ensures that the model is trained on one subset of the data and evaluated on another subset, mimicking real-world scenarios where predictions are made on unseen data. It helps to assess how well the model generalizes to new information.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb3-2"><a></a></span>
<span id="cb3-3"><a></a>train_index <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(df<span class="sc">$</span>Purchase, <span class="at">p =</span> <span class="fl">0.8</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-4"><a></a>train_data <span class="ot">&lt;-</span> df[train_index, ]</span>
<span id="cb3-5"><a></a>test_data  <span class="ot">&lt;-</span> df[<span class="sc">-</span>train_index, ]</span>
<span id="cb3-6"><a></a></span>
<span id="cb3-7"><a></a><span class="fu">table</span>(train_data<span class="sc">$</span>Purchase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="baseline-prediction" class="slide level2 center">
<h2>Baseline Prediction</h2>
<div>
<div style="font-size: 99%;">
<p>The baseline prediction is the proportion of customers who made a purchase:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>baseline_prob <span class="ot">&lt;-</span> <span class="fu">mean</span>(train_data<span class="sc">$</span>Purchase <span class="sc">==</span> <span class="st">"Yes"</span>)</span>
<span id="cb4-2"><a></a>baseline_prob</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Interpretation:</strong></p>
<ul>
<li>This baseline represents the probability of a purchase if no predictors are used.</li>
<li>It serves as a reference point to evaluate the added value of the logistic regression model.</li>
</ul>
</div>
</div>
</section></section>
<section>
<section id="model-training-fitting-a-logistic-regression-model" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Model Training<br>Fitting a Logistic Regression Model</h1>

</section>
<section id="fitting-a-logistic-regression-model" class="slide level2 center">
<h2>Fitting a Logistic Regression Model</h2>
<div>
<div style="font-size: 65%;">
<p>We fit a logistic regression model on the training data and model the relationship between a binary dependent variable and one or more independent variables. Here, we predict the probability of purchase (<code>Purchase</code>) based on customer attributes (<code>Age</code>, <code>Gender</code>, <code>Income</code>, and <code>Engagement</code>).</p>
<p>This step includes specifying:</p>
<ul>
<li><p>The formula (<code>Purchase ~ Age + Gender + Income + Engagement</code>), which defines the relationship between the dependent and independent variables.</p></li>
<li><p>The method (<code>glm</code>), indicating that we are using a generalized linear model.</p></li>
<li><p>The link function (<code>binomial(link = "logit")</code>), ensuring the model estimates probabilities using the logistic function.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb5-2"><a></a></span>
<span id="cb5-3"><a></a>train_control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(</span>
<span id="cb5-4"><a></a>  <span class="at">classProbs      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-5"><a></a>  <span class="at">summaryFunction =</span> prSummary    <span class="co"># &lt;--- uses Precision, Recall, F, AUC</span></span>
<span id="cb5-6"><a></a>)</span>
<span id="cb5-7"><a></a></span>
<span id="cb5-8"><a></a>model_fit <span class="ot">&lt;-</span> <span class="fu">train</span>(</span>
<span id="cb5-9"><a></a>  Purchase <span class="sc">~</span> Age <span class="sc">+</span> Gender <span class="sc">+</span> Income <span class="sc">+</span> Engagement,</span>
<span id="cb5-10"><a></a>  <span class="at">data =</span> train_data,</span>
<span id="cb5-11"><a></a>  <span class="at">method =</span> <span class="st">"glm"</span>,</span>
<span id="cb5-12"><a></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>),</span>
<span id="cb5-13"><a></a>  <span class="at">trControl =</span> train_control,</span>
<span id="cb5-14"><a></a>  <span class="at">metric    =</span> <span class="st">"F"</span>          <span class="co"># or "AUC", "Precision", "Recall"</span></span>
<span id="cb5-15"><a></a>)</span>
<span id="cb5-16"><a></a></span>
<span id="cb5-17"><a></a><span class="fu">summary</span>(model_fit<span class="sc">$</span>finalModel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The summary provides details about the model’s coefficients, which indicate the strength and direction of each predictor’s influence on the purchase probability.</p>
<p><br></p>
<p><br></p>
</div>
</div>
</section></section>
<section>
<section id="predictions-on-the-test-set" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Predictions on the Test Set</h1>

</section>
<section id="predictions-on-the-test-set-1" class="slide level2 center">
<h2>Predictions on the Test Set</h2>
<div>
<div style="font-size: 80%;">
<p>To evaluate the model, we obtain predictions for the test set. This involves two steps:</p>
<ol type="1">
<li><p><strong>Class Predictions:</strong> Predicting the most likely class (e.g., <code>Yes</code> or <code>No</code>) for each observation.</p></li>
<li><p><strong>Probability Predictions:</strong> Predicting the probability of each class, which provides more nuanced insights.</p></li>
</ol>
<p>This allows us to assess the model’s ability to generalize to unseen data and evaluate its performance using metrics such as accuracy, ROC-AUC, and confusion matrix.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>pred_classes <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_fit, <span class="at">newdata =</span> test_data)</span>
<span id="cb6-2"><a></a>pred_probs   <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_fit, <span class="at">newdata =</span> test_data, <span class="at">type =</span> <span class="st">"prob"</span>)</span>
<span id="cb6-3"><a></a></span>
<span id="cb6-4"><a></a><span class="fu">head</span>(pred_classes)  <span class="co"># Displays the predicted classes for the first few observations</span></span>
<span id="cb6-5"><a></a><span class="fu">head</span>(pred_probs)    <span class="co"># Displays the predicted probabilities for the first few observations</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By analyzing these predictions, we can determine how well the model distinguishes between <code>Yes</code> and <code>No</code> cases and identify areas for improvement.</p>
</div>
</div>
</section></section>
<section>
<section id="model-evaluation" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Model Evaluation</h1>

</section>
<section id="confusion-matrix" class="slide level2 center">
<h2>Confusion Matrix</h2>
<div>
<div style="font-size: 80%;">
<p>The confusion matrix provides a summary of prediction results. It compares the predicted and actual classes, offering insights into the model’s classification performance.</p>
<div class="center">
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Predicted: 0</th>
<th>Predicted: 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Actual: 0</strong></td>
<td>True Negative (TN)</td>
<td>False Positive (FP)</td>
</tr>
<tr class="even">
<td><strong>Actual: 1</strong></td>
<td>False Negative (FN)</td>
<td>True Positive (TP)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="confusion-matrix-1" class="slide level2 center">
<h2>Confusion Matrix</h2>
<div>
<div style="font-size: 75%;">
<p>Key metrics derived from the confusion matrix include:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top">
<caption><strong>Performance Metrics</strong></caption>
<thead>
<tr class="header">
<th style="text-align: left;">Metric</th>
<th style="text-align: right;">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Accuracy</td>
<td style="text-align: right;">0.6950</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sensitivity (Recall)</td>
<td style="text-align: right;">0.8492</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Specificity</td>
<td style="text-align: right;">0.4324</td>
</tr>
<tr class="even">
<td style="text-align: left;">Precision</td>
<td style="text-align: right;">0.7181</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F1 Score</td>
<td style="text-align: right;">0.7782</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><br></p>
<ul>
<li><strong>Accuracy:</strong> The proportion of correct predictions.</li>
<li><strong>Sensitivity (Recall):</strong> The model’s ability to identify positive cases.</li>
<li><strong>Specificity:</strong> The model’s ability to identify negative cases.</li>
<li><strong>Precision:</strong> Among predicted positive cases, the proportion that are truly positive.</li>
<li><strong>F1 Score:</strong> The harmonic mean of Precision and Sensitivity, balancing false positives and false negatives.</li>
</ul>
</div>
</div>
</section>
<section id="accuracy" class="slide level2 center">
<h2>Accuracy</h2>
<div>
<div style="font-size: 80%;">
<div style="display: flex; align-items: center; gap: 2em;">
<div class="column" style="flex: 1;">
<center>
<strong>Confusion Matrix</strong>
</center>
<p><br></p>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Predicted: 0</th>
<th>Predicted: 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Actual: 0</strong></td>
<td>True Negative (TN)</td>
<td>False Positive (FP)</td>
</tr>
<tr class="even">
<td><strong>Actual: 1</strong></td>
<td>False Negative (FN)</td>
<td>True Positive (TP)</td>
</tr>
</tbody>
</table>
</div><div class="column" style="flex: 1;">
<center>
<strong>Formula</strong>
</center>
<p><br></p>
<p><span class="math display">\[
\text{Accuracy} = \frac{\text{TP} + \text{TN}}{\text{TP} + \text{TN} + \text{FP} + \text{FN}}
\]</span></p>
</div></div>
<p><br></p>
<div class="fragment">
<ul>
<li><p>Overall effectiveness of the model.</p></li>
<li><p>In the context of weather forecasting, for example, accuracy reflects how well a model predicts weather events correctly (e.g., rainy or sunny days).</p></li>
<li><p><strong>High accuracy</strong>: lots of correct predictions!</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="recall-sensitivity" class="slide level2 center">
<h2>Recall (Sensitivity)</h2>
<div>
<div style="font-size: 80%;">
<div style="display: flex; align-items: center; gap: 2em;">
<div class="column" style="flex: 1;">
<center>
<strong>Confusion Matrix</strong>
</center>
<p><br></p>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Predicted: 0</th>
<th>Predicted: 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Actual: 0</strong></td>
<td>True Negative (TN)</td>
<td>False Positive (FP)</td>
</tr>
<tr class="even">
<td><strong>Actual: 1</strong></td>
<td>False Negative (FN)</td>
<td>True Positive (TP)</td>
</tr>
</tbody>
</table>
</div><div class="column" style="flex: 1;">
<center>
<strong>Formula</strong>
</center>
<p><br></p>
<p><span class="math display">\[
\text{Recall} = \frac{\text{TP}}{\text{TP} + \text{FN}}
\]</span></p>
</div></div>
<p><br></p>
<div class="fragment">
<ul>
<li><p>Is the fraction of positives correctly identified.</p></li>
<li><p>In criminal justice, it would assess how well a predictive policing model identifies all potential criminal activities (True Positives) without missing any (thus minimizing False Negatives).</p></li>
<li><p><strong>High recall</strong>: low false-negative rates.</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="specificity" class="slide level2 center">
<h2>Specificity</h2>
<div>
<div style="font-size: 80%;">
<div style="display: flex; align-items: center; gap: 2em;">
<div class="column" style="flex: 1;">
<center>
<strong>Confusion Matrix</strong>
</center>
<p><br></p>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Predicted: 0</th>
<th>Predicted: 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Actual: 0</strong></td>
<td>True Negative (TN)</td>
<td>False Positive (FP)</td>
</tr>
<tr class="even">
<td><strong>Actual: 1</strong></td>
<td>False Negative (FN)</td>
<td>True Positive (TP)</td>
</tr>
</tbody>
</table>
</div><div class="column" style="flex: 1;">
<center>
<strong>Formula</strong>
</center>
<p><br></p>
<p><span class="math display">\[
\text{Specificity} = \frac{\text{TN}}{\text{TN} + \text{FP}}
\]</span></p>
</div></div>
<p><br></p>
<div class="fragment">
<ul>
<li><p>It is the true negative rate, measuring a model’s ability to correctly identify actual negatives.</p></li>
<li><p>Crucial in fields where incorrectly identifying a negative case as positive could have serious implications (e.g., criminal justice).</p></li>
<li><p><strong>High specificity</strong>: the model is very effective at identifying true negatives.</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="precision" class="slide level2 center">
<h2>Precision</h2>
<div>
<div style="font-size: 80%;">
<div style="display: flex; align-items: center; gap: 2em;">
<div class="column" style="flex: 1;">
<center>
<strong>Confusion Matrix</strong>
</center>
<p><br></p>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Predicted: 0</th>
<th>Predicted: 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Actual: 0</strong></td>
<td>True Negative (TN)</td>
<td>False Positive (FP)</td>
</tr>
<tr class="even">
<td><strong>Actual: 1</strong></td>
<td>False Negative (FN)</td>
<td>True Positive (TP)</td>
</tr>
</tbody>
</table>
</div><div class="column" style="flex: 1;">
<center>
<strong>Formula</strong>
</center>
<p><br></p>
<p><span class="math display">\[
\text{Precision} = \frac{\text{TP}}{\text{TP} + \text{FP}}
\]</span></p>
</div></div>
<p><br></p>
<div class="fragment">
<ul>
<li><p>Accuracy of positive predictions.</p></li>
<li><p>In email spam detection, it would indicate the percentage of emails correctly identified as spam (True Positives) out of all emails flagged as spam, aiming to reduce the number of legitimate emails incorrectly marked as spam (False Positives).</p></li>
<li><p><strong>High precision</strong>: low false-positive rates.</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="f1-score" class="slide level2 center">
<h2>F1-Score</h2>
<div>
<div style="font-size: 80%;">
<div style="display: flex; align-items: center; gap: 2em;">
<div class="column" style="flex: 1;">
<center>
<strong>Confusion Matrix</strong>
</center>
<p><br></p>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Predicted: 0</th>
<th>Predicted: 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Actual: 0</strong></td>
<td>True Negative (TN)</td>
<td>False Positive (FP)</td>
</tr>
<tr class="even">
<td><strong>Actual: 1</strong></td>
<td>False Negative (FN)</td>
<td>True Positive (TP)</td>
</tr>
</tbody>
</table>
</div><div class="column" style="flex: 1;">
<center>
<strong>Formula</strong>
</center>
<p><br></p>
<p><span class="math display">\[
\text{F1} = 2 \cdot \frac{\text{Precision} \cdot \text{Recall}}{\text{Precision} + \text{Recall}}
\]</span></p>
</div></div>
<p><br></p>
<div class="fragment">
<ul>
<li><p>Harmonic mean of Precision and Recall.</p></li>
<li><p>In a medical diagnosis scenario, it would help in evaluating a test’s effectiveness in correctly identifying patients with a disease (True Positives) while minimizing the misclassification of healthy individuals as diseased (False Positives and False Negatives).</p></li>
<li><p><strong>High F1 score</strong>: a better balance between precision and recall.</p></li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="roc-curve-auc" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>ROC Curve &amp; AUC</h1>

</section>
<section id="roc-curve-auc-1" class="slide level2 center">
<h2>ROC Curve &amp; AUC</h2>
<div>
<div style="font-size: 80%;">
<p>The ROC (Receiver Operating Characteristic) curve is a graphical representation that illustrates the trade-off between the true positive rate (Sensitivity) and the false positive rate (1 - Specificity) across various threshold values. The AUC (Area Under the Curve) summarizes the ROC curve into a single value, indicating the model’s overall performance.</p>
<ul>
<li><p><strong>AUC Interpretation:</strong></p>
<ul>
<li><strong>AUC</strong> <span class="math inline">\(\approx\)</span> 1: The model has near-perfect predictive capability.</li>
<li><strong>AUC</strong> <span class="math inline">\(\approx\)</span> 0.5: The model performs no better than random guessing.</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="roc-curve-auc-2" class="slide level2 center">
<h2>ROC Curve &amp; AUC</h2>
<div>
<div style="font-size: 80%;">
<p>The ROC curve and AUC provide a comprehensive evaluation of the model’s discriminatory power.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="09_model_evaluation_files/figure-revealjs/unnamed-chunk-13-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>AUC Value:</strong> Indicates the likelihood that the model will correctly distinguish between a positive and a negative instance. Higher values reflect better model performance.</p>
</div>
</div>
</section></section>
<section>
<section id="k-fold-cross-validation" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>K-Fold Cross-Validation</h1>

</section>
<section id="k-fold-cross-validation-1" class="slide level2 center">
<h2>K-Fold Cross-Validation</h2>
<div>
<div style="font-size: 80%;">
<p>K-Fold Cross-Validation is a resampling technique that evaluates model performance by dividing the dataset into <strong>k subsets (folds)</strong>. The model is trained on <strong>k-1 folds</strong> and validated on the remaining fold, repeating this process <span class="math inline">\(k\)</span> times to ensure each fold serves as the validation set once.</p>
<p><strong>Advantages of K-Fold Cross-Validation:</strong></p>
<ul>
<li>Reduces overfitting by training and validating on different subsets.</li>
<li>Provides a more reliable estimate of model performance compared to a single train-test split.</li>
<li>Ensures the model generalizes well to unseen data.</li>
</ul>
</div>
</div>
</section>
<section id="k-fold-cross-validation-2" class="slide level2 center">
<h2>K-Fold Cross-Validation</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="co"># install.packages("MLmetrics")</span></span>
<span id="cb7-2"><a></a><span class="fu">library</span>(MLmetrics)</span>
<span id="cb7-3"><a></a></span>
<span id="cb7-4"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb7-5"><a></a></span>
<span id="cb7-6"><a></a>train_control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(</span>
<span id="cb7-7"><a></a>  <span class="at">method          =</span> <span class="st">"cv"</span>,</span>
<span id="cb7-8"><a></a>  <span class="at">number          =</span> <span class="dv">10</span>,</span>
<span id="cb7-9"><a></a>  <span class="at">p =</span> .<span class="dv">8</span>,</span>
<span id="cb7-10"><a></a>  <span class="at">classProbs      =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-11"><a></a>  <span class="at">summaryFunction =</span> prSummary    <span class="co"># &lt;--- uses Precision, Recall, F, AUC</span></span>
<span id="cb7-12"><a></a>)</span>
<span id="cb7-13"><a></a></span>
<span id="cb7-14"><a></a>model_cv <span class="ot">&lt;-</span> <span class="fu">train</span>(</span>
<span id="cb7-15"><a></a>  Purchase <span class="sc">~</span> .,</span>
<span id="cb7-16"><a></a>  <span class="at">data      =</span> train_data,  <span class="co"># or your entire df, depending on your design</span></span>
<span id="cb7-17"><a></a>  <span class="at">method    =</span> <span class="st">"glm"</span>,</span>
<span id="cb7-18"><a></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>),</span>
<span id="cb7-19"><a></a>  <span class="at">trControl =</span> train_control,</span>
<span id="cb7-20"><a></a>  <span class="at">metric    =</span> <span class="st">"F"</span>          <span class="co"># or "AUC", "Precision", "Recall"</span></span>
<span id="cb7-21"><a></a>)</span>
<span id="cb7-22"><a></a></span>
<span id="cb7-23"><a></a><span class="co"># Inspect the cross-validation results:</span></span>
<span id="cb7-24"><a></a><span class="co"># model_cv  # Displays cross-validated model performance</span></span>
<span id="cb7-25"><a></a>model_cv<span class="sc">$</span>results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="comparing-train-test-performance-and-k-fold-cross-validation-performance" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Comparing Train-Test Performance and K-Fold Cross-Validation Performance</h1>

</section>
<section id="comparing-train-test-performance-and-k-fold-cross-validation-performance-1" class="slide level2 center">
<h2>Comparing Train-Test Performance and K-Fold Cross-Validation Performance</h2>
<div>
<div style="font-size: 70%;">
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment">
<ol type="1">
<li><p><strong>Assessing Model Generalization</strong></p>
<ul>
<li>Train-Test Performance evaluates how well a model generalizes to unseen data from a single split.</li>
<li>K-Fold Cross-Validation provides a more robust performance estimate across multiple splits.</li>
<li>Comparing the two ensures consistent performance on unseen data.</li>
</ul></li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><p><strong>Detecting Overfitting or Underfitting</strong></p>
<ul>
<li><strong>Overfitting</strong>: Train-test performance is much better than K-Fold performance.</li>
<li><strong>Underfitting</strong>: Both metrics show poor performance.</li>
<li>The comparison highlights issues with model complexity.</li>
</ul></li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li><p><strong>Mitigating Sampling Bias</strong></p>
<ul>
<li>Single splits (train-test) can introduce sampling bias, especially with small datasets.</li>
<li>Cross-validation averages performance across folds, reducing bias.</li>
<li>Ensures reliability of performance estimates.</li>
</ul></li>
</ol>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<ol start="4" type="1">
<li><p><strong>Understanding Variance in Model Evaluation</strong></p>
<ul>
<li>Train-test performance can vary based on split choice.</li>
<li>K-Fold Cross-Validation offers insights into the variance of the performance estimate.</li>
<li>Aids in strategies to reduce variance, such as adding more data.</li>
</ul></li>
</ol>
</div>
<div class="fragment">
<ol start="5" type="1">
<li><p><strong>Model Selection and Hyperparameter Tuning</strong></p>
<ul>
<li>Cross-validation is used for stable performance estimates during training.</li>
<li>Train-Test Performance validates the chosen model’s final performance.</li>
<li>Discrepancies indicate potential overfitting during tuning.</li>
</ul></li>
</ol>
</div>
<div class="fragment">
<ol start="6" type="1">
<li><p><strong>Real-World Applicability</strong></p>
<ul>
<li>Train-Test: Simpler, faster, checks practical performance on unseen data.</li>
<li>K-Fold Cross-Validation: Provides theoretical robustness.</li>
<li>Bridging evaluation theory and deployment performance.</li>
</ul></li>
</ol>
</div>
</div></div>
</div>
</div>
</section>
<section id="comparing-train-test-performance-and-k-fold-cross-validation-performance-2" class="slide level2 center">
<h2>Comparing Train-Test Performance and K-Fold Cross-Validation Performance</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="co"># =========================</span></span>
<span id="cb8-2"><a></a><span class="co"># Load required packages</span></span>
<span id="cb8-3"><a></a><span class="co"># =========================</span></span>
<span id="cb8-4"><a></a><span class="fu">library</span>(caret)</span>
<span id="cb8-5"><a></a><span class="fu">library</span>(pROC)</span>
<span id="cb8-6"><a></a></span>
<span id="cb8-7"><a></a><span class="co"># =========================</span></span>
<span id="cb8-8"><a></a><span class="co"># Single Train-Test Performance</span></span>
<span id="cb8-9"><a></a><span class="co"># =========================</span></span>
<span id="cb8-10"><a></a></span>
<span id="cb8-11"><a></a><span class="co"># 1. Compute confusion matrix to get Precision, Recall, F1</span></span>
<span id="cb8-12"><a></a>train_test_metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(</span>
<span id="cb8-13"><a></a>  <span class="at">data      =</span> pred_classes,</span>
<span id="cb8-14"><a></a>  <span class="at">reference =</span> test_data<span class="sc">$</span>Purchase,</span>
<span id="cb8-15"><a></a>  <span class="at">positive  =</span> <span class="st">"Yes"</span></span>
<span id="cb8-16"><a></a>)</span>
<span id="cb8-17"><a></a></span>
<span id="cb8-18"><a></a><span class="co"># 2. Calculate AUC on the test set</span></span>
<span id="cb8-19"><a></a>roc_obj_test <span class="ot">&lt;-</span> <span class="fu">roc</span>(test_data<span class="sc">$</span>Purchase, pred_probs<span class="sc">$</span>Yes, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))</span>
<span id="cb8-20"><a></a>auc_test     <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">auc</span>(roc_obj_test))</span>
<span id="cb8-21"><a></a></span>
<span id="cb8-22"><a></a><span class="co"># 3. Obtain 95% CI for the AUC</span></span>
<span id="cb8-23"><a></a>auc_test_ci  <span class="ot">&lt;-</span> <span class="fu">ci</span>(roc_obj_test, <span class="at">of =</span> <span class="st">"auc"</span>)  <span class="co"># typically returns c(lower, median, upper)</span></span>
<span id="cb8-24"><a></a></span>
<span id="cb8-25"><a></a><span class="co"># 4. Extract the relevant metrics</span></span>
<span id="cb8-26"><a></a>train_test_results <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-27"><a></a>  <span class="at">AUC        =</span> auc_test,</span>
<span id="cb8-28"><a></a>  <span class="at">Precision  =</span> train_test_metrics<span class="sc">$</span>byClass[[<span class="st">"Pos Pred Value"</span>]],</span>
<span id="cb8-29"><a></a>  <span class="at">Recall     =</span> train_test_metrics<span class="sc">$</span>byClass[[<span class="st">"Sensitivity"</span>]],</span>
<span id="cb8-30"><a></a>  <span class="at">F1         =</span> train_test_metrics<span class="sc">$</span>byClass[[<span class="st">"F1"</span>]]</span>
<span id="cb8-31"><a></a>)</span>
<span id="cb8-32"><a></a></span>
<span id="cb8-33"><a></a><span class="co"># =========================</span></span>
<span id="cb8-34"><a></a><span class="co"># K-Fold Cross-Validation Metrics</span></span>
<span id="cb8-35"><a></a><span class="co"># =========================</span></span>
<span id="cb8-36"><a></a></span>
<span id="cb8-37"><a></a><span class="co"># Identify the row with the highest F in model_cv</span></span>
<span id="cb8-38"><a></a>best_idx  <span class="ot">&lt;-</span> <span class="fu">which.max</span>(model_cv<span class="sc">$</span>results<span class="sc">$</span>F)</span>
<span id="cb8-39"><a></a>cv_metrics <span class="ot">&lt;-</span> model_cv<span class="sc">$</span>results[best_idx, ]</span>
<span id="cb8-40"><a></a></span>
<span id="cb8-41"><a></a><span class="co"># Assuming model_cv$results contains columns like:</span></span>
<span id="cb8-42"><a></a><span class="co">#  AUC, AUCSD, Precision, PrecisionSD, Recall, RecallSD, F, FSD</span></span>
<span id="cb8-43"><a></a><span class="co"># (from a custom prSummary or similar)</span></span>
<span id="cb8-44"><a></a>cv_results <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-45"><a></a>  <span class="at">AUC             =</span> cv_metrics[[<span class="st">"AUC"</span>]],</span>
<span id="cb8-46"><a></a>  <span class="at">AUC_lower       =</span> cv_metrics[[<span class="st">"AUC"</span>]] <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> cv_metrics[[<span class="st">"AUCSD"</span>]],</span>
<span id="cb8-47"><a></a>  <span class="at">AUC_upper       =</span> cv_metrics[[<span class="st">"AUC"</span>]] <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> cv_metrics[[<span class="st">"AUCSD"</span>]],</span>
<span id="cb8-48"><a></a>  <span class="at">Precision       =</span> cv_metrics[[<span class="st">"Precision"</span>]],</span>
<span id="cb8-49"><a></a>  <span class="at">Precision_lower =</span> cv_metrics[[<span class="st">"Precision"</span>]] <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> cv_metrics[[<span class="st">"PrecisionSD"</span>]],</span>
<span id="cb8-50"><a></a>  <span class="at">Precision_upper =</span> cv_metrics[[<span class="st">"Precision"</span>]] <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> cv_metrics[[<span class="st">"PrecisionSD"</span>]],</span>
<span id="cb8-51"><a></a>  <span class="at">Recall          =</span> cv_metrics[[<span class="st">"Recall"</span>]],</span>
<span id="cb8-52"><a></a>  <span class="at">Recall_lower    =</span> cv_metrics[[<span class="st">"Recall"</span>]] <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> cv_metrics[[<span class="st">"RecallSD"</span>]],</span>
<span id="cb8-53"><a></a>  <span class="at">Recall_upper    =</span> cv_metrics[[<span class="st">"Recall"</span>]] <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> cv_metrics[[<span class="st">"RecallSD"</span>]],</span>
<span id="cb8-54"><a></a>  <span class="at">F1              =</span> cv_metrics[[<span class="st">"F"</span>]],</span>
<span id="cb8-55"><a></a>  <span class="at">F1_lower        =</span> cv_metrics[[<span class="st">"F"</span>]] <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> cv_metrics[[<span class="st">"FSD"</span>]],</span>
<span id="cb8-56"><a></a>  <span class="at">F1_upper        =</span> cv_metrics[[<span class="st">"F"</span>]] <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> cv_metrics[[<span class="st">"FSD"</span>]]</span>
<span id="cb8-57"><a></a>)</span>
<span id="cb8-58"><a></a></span>
<span id="cb8-59"><a></a><span class="co"># =========================</span></span>
<span id="cb8-60"><a></a><span class="co"># Combine Results</span></span>
<span id="cb8-61"><a></a><span class="co"># =========================</span></span>
<span id="cb8-62"><a></a>comparison <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-63"><a></a>  <span class="at">Train_Test =</span> train_test_results,</span>
<span id="cb8-64"><a></a>  <span class="at">K_Fold_CV  =</span> cv_results</span>
<span id="cb8-65"><a></a>)</span>
<span id="cb8-66"><a></a></span>
<span id="cb8-67"><a></a>comparison</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualizing-single-train-test-vs-k-fold-cv" class="slide level2 center">
<h2>Visualizing Single Train-Test vs K-Fold CV</h2>

<img data-src="09_model_evaluation_files/figure-revealjs/unnamed-chunk-16-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section></section>
<section>
<section id="summary" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Summary</h1>

</section>
<section id="summary-1" class="slide level2 center">
<h2>Summary</h2>
<div>
<div style="font-size: 80%;">
<p>Main Takeaways from this lecture:</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Logistic Regression Framework</strong> - Logistic regression is a powerful method for binary classification. - Key assumptions: - Binary dependent variable. - Linearity in log-odds. - No multicollinearity among predictors.</p>
<p><strong>Evaluation Metrics</strong></p>
<ul>
<li><p><strong>Confusion Matrix</strong> provides:</p>
<ul>
<li>Sensitivity (Recall)</li>
<li>Specificity</li>
<li>Precision</li>
<li>F1 Score</li>
</ul></li>
<li><p><strong>ROC Curve and AUC</strong> evaluate model discrimination across thresholds.</p></li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li><p><strong>Train-Test Split</strong>:</p>
<ul>
<li>Ensures the model is trained and tested on separate datasets.</li>
<li>Baseline accuracy serves as a benchmark for improvement.</li>
</ul></li>
<li><p><strong>K-Fold Cross-Validation</strong>:</p>
<ul>
<li>Reduces overfitting and sampling bias.</li>
<li>Provides a reliable estimate of model performance.</li>
</ul></li>
</ul>
<p><strong>Performance Comparison</strong></p>
<ul>
<li>Cross-validation metrics give a robust view of generalization.</li>
<li>Train-test split results provide practical insights for deployment.</li>
<li>Use both approaches for a comprehensive evaluation.</li>
</ul>
</div></div>
</div>
</div>
</section></section>
<section id="thank-you" class="title-slide slide level1 center" data-background-color="#cfb991">
<h1>Thank you!</h1>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>Data Mining Lab</p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>